!!!
%html
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:name => "viewport", :content => "width=device-width, initial-scale=1"}/
    %meta{:content => "width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no", :name => "viewport"}
    %link{:href => "//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css", :rel => "stylesheet"}
    %script{:src => "http://tracking.pedia.vn/client-api/js/spymaster.js", :type => "text/javascript"}

    = favicon_link_tag 'favicon_pedia.png'
    %title= help_get_title
    = stylesheet_link_tag    'application', media: 'all'

    = javascript_include_tag 'application'
    - if Rails.env == 'production'
      :javascript
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      - if current_user && current_user.id
        :javascript
          ga('create', 'UA-68038326-1', {'userId': "#{current_user.id}"});
          ga('send', 'pageview');
          Spymaster.setup("Pedia", "beta", "#{current_user.id}");
      - else
        :javascript
          ga('create', 'UA-68038326-1', 'auto');
          ga('send', 'pageview');
          Spymaster.setup("Pedia", "beta");          
    / Facebook Pixel Code
    :javascript
      !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
      n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
      document,'script','//connect.facebook.net/en_US/fbevents.js');
      
      fbq('init', '433950950110580');
      fbq('track', 'PageView');
    %noscript
      %img{:height => "1", :src => "https://www.facebook.com/tr?id=433950950110580&ev=PageView&noscript=1", :style => "display:none", :width => "1"}/
    / End Facebook Pixel Code

    %noscript
      %iframe{:height => "0", :src => "//www.googletagmanager.com/ns.html?id=GTM-NVZ64F", :style => "display:none;visibility:hidden", :width => "0"}
    :javascript
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-NVZ64F');

    :javascript
      if (window.location.hash && window.location.hash == '#_=_') {
          if (window.history && history.pushState) {
              window.history.pushState("", document.title, window.location.pathname);
          } else {
              // Prevent scrolling by storing the page's current scroll offset
              var scroll = {
                  top: document.body.scrollTop,
                  left: document.body.scrollLeft
              };
              window.location.hash = '';
              // Restore the scroll offset, should be flicker free
              document.body.scrollTop = scroll.top;
              document.body.scrollLeft = scroll.left;
          }
      }
    = csrf_meta_tags
  %body
    = yield
    = javascript_include_tag 'application'